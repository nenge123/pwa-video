<!DOCTYPE html>
<html lang="{{ page.lang | default: site.lang | default: " zh-CN" }}">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="initial-scale=1.0,width=device-width,user-scalable=no">
  <meta name="x-content-type-options" content="nosniff" />
  <meta name="renderer" content="webkit">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta http-equiv="cache-control" content="no-cache" />
  <meta http-equiv="Content-Language" contect="{{ page.lang | default: site.lang | default: "zh-CN" }}">
  <title>{%- if page.title -%}{{ page.title}}{%- else -%}<%- title -%>{%- endif -%}</title>
  <link rel="stylesheet" href="/assets/css/style.css" />
  <script id="common-loader" type="text/javascript" src="/assets/js/common.js"></script>
</head>
<body>
  <header id="header">
    <nav>
      <h1><a href="/">首页</a></h1>
      <button class="menu-toggle" title="菜单" popovertarget="#" popovertargetaction="toggle">
        <span></span>
      </button>
      <ol id="menu-nav">
        <li>
          <a class="home" href="/">能哥网</a>
        </li>
      </ol>
    </nav>
  </header>
  {{ content }}
  <footer id="footer" class="h-card">
    <p>
      <span>Github Pageus:</span>
      <a href="//github.com/nenge123/pwa-video">Nenge.net</a>
    </p>
    <p
      <span>&copy; 2021-2024 &bull; All Rights Reserved.</span>
      <a href="#">Jekyll</a>
    </p>
    <p class="c-red">由于使用访问即缓存模式<br>IOS切记添加书签到主屏幕!内存不够用可以删除书签重新添加!</p>
  </footer>
  <dialog id="pwa-register" class="wbox info" popover>
    <div class="title">
        <b>提醒</b>
        <button class="close" onclick="this.parentNode.parentNode.hidePopover();"></button>
    </div>
    <div class="content">ServiceWorker加载成功!1秒后刷新!</div>
  </dialog>
  <dialog id="admin-act" class="wbox" popover>
      <div class="title">管理中心</div>
      <div class="content">
        <ul>
          <li>
            <h3>视频数据导入</h3>
            <p>
              <button onclick="T.toUpload('zip',!1);">覆盖zip数据包</button>
              <button onclick="T.toUpload('zip',!0);">追加zip数据包</button>
            </p>
            <p>
              <button onclick="T.toUpload('json',!1,'.text,.json');">覆盖json数据</button>
              <button onclick="T.toUpload('json',!0,'.text,.json');">追加json数据</button>
            </p>
            <div class="wbox blue">
              <p>覆盖是以数据的ID更新数据,追加是总是额外添加.<br>导入过程可能等待很久,请勿其他操作,直至消息提醒!!!(苹果11测试处理1000条数据约3-5秒)</p>
            </div>
          </li>
          <li>
            <h3>缓存管理</h3>
            <p>
              <button onclick="T.toClear('-CROSS-IMAGES');">清空TS视频缓存</button>
              <button onclick="T.toClear('-CROSS-TS');">清空远程图片封面缓存</button>
              <button onclick="T.toClear('-CROSS-M3U8');">清空远程m3u8缓存</button>
            </p>
            <p>
              <button onclick="T.toClear('-CROSS-DATA');" class="warning">清空本地视频数据</button>
              <button onclick="T.toClear('');" class="warning">清空本地缓存文件</button><b>(异常时使用)</b>
            </p>
            <div class="wbox blue">
              <p>TS是缓存播放数据,占用随着播放视频量增加,播放页中删除视频并不会删除TS缓存,只能一次性全部清空.</p>
              <p>本地缓存文件删除会清空视频记录(模板,SQLite文件),如果出现模板文件不更新,可以清空初始化再导入视频记录数据.</p>
              <button onclick="T.update();">刷新PWA</button>
            </div>
          </li>
          <li>
            <h3>SQLite数据库管理</h3>
            <button onclick="T.export()">导出文件</button>
            <button onclick="T.toUpload('import')">导入文件(覆盖)</button>
            <div class="wbox blue">
              <p>此功能是直接处理数据库本身(SQLite文件)<br>因此可以直接分享你的专属影片库给你的朋友!共享影片库!</p>
            </div>
          </li>
          <li class="caiji">
            <h3>视频采集(<b style="color: red;">请找带跨域的采集资源中心API地址</b>)</h3>
            <label><input type="text" id="caiji-url" value="" placeholder="输入一个可采集地址[苹果CMS后台联盟采集标准]"></label>
            <p><button onclick="T.caiji(!1,this)">普通采集</button> <button onclick="T.caiji(!0,this)">更新式采集</button></p>
            <div class="wbox blue">
              <p>带<b>"pg=页面"</b>参数,<b>普通采集</b>只采集当前页面,否则采集全部,请耐心等待!!!<p>
              <p>更新式采集:会发现数据重复立即停止采集.带页面参数仍旧会继续递增页面采集.</p>
              <p>采集地址格式:<code>https://xxxxx/?ac=detail&t=分类名&pg=第几页</code></p>
            </div>
          </li>
        </ul>
        <div>
          <h3>喜欢就点个赞~⛏</h3>
          <div class="wbox blue">使用技巧:以苹果手机为例,添加1-2个到<b>主屏幕</b>,觉得A有好看的,单独把数据导入B.B可以作为专属收藏.添加到主屏幕的数据是独立的,A和B缓存不共享.所以避免太占用储存空间,A作为临时用,B作为永久影院.关于下载的TS格式视频,请使用例如<b>QQ影音</b>这里播放器可以播放的.</div>
          <div style="text-align:center;">
            <img src="/assets/img/zan.jpg">
          </div>
        </div>
      </div>
  </dialog>
  <dialog id="pwa-notice" class="wbox" popover>
      <div class="title">提醒</div>
      <div class="content">
        更新成功
      </div>
  </dialog>
</body>
</html>